(this["webpackJsonpfile-share"]=this["webpackJsonpfile-share"]||[]).push([[0],{13:function(e,n,t){e.exports={card:"FileCard_card__2LQTx",card_iconContainer:"FileCard_card_iconContainer__1stON",card__icon:"FileCard_card__icon__3au0f",card__icon_hover:"FileCard_card__icon_hover__1ZfZb",card__title:"FileCard_card__title__3F9SZ",card__progress:"FileCard_card__progress__13gjT"}},14:function(e,n,t){e.exports={heading:"ShareClient_heading__VAHtz",connectionBox:"ShareClient_connectionBox__1kudq",container:"ShareClient_container__22l9m",spinner:"ShareClient_spinner__1DKly",connectionStatus:"ShareClient_connectionStatus__zdiMK",noFiles:"ShareClient_noFiles__1diTg"}},18:function(e,n,t){e.exports={container:"Home_container__q5gBo",heading:"Home_heading__3rzF0",lead:"Home_lead__27OI1",backdrop:"Home_backdrop__1n7Oa",spinnerContainer:"Home_spinnerContainer__3Cqik"}},19:function(e,n,t){e.exports={heading:"ShareHost_heading__3e1Cg",connectionBox:"ShareHost_connectionBox__2Ibxu",container:"ShareHost_container__3R05H",spinner:"ShareHost_spinner__3zaTs",connectionStatus:"ShareHost_connectionStatus__32Sgu"}},23:function(e,n,t){e.exports={inputGroup:"InputToClipboard_inputGroup__1K_jF",input:"InputToClipboard_input__aZxeq",btn:"InputToClipboard_btn__13k-2",icon:"InputToClipboard_icon__xv5Og"}},33:function(e,n,t){e.exports={header:"Header_header__Q76hA",header__heading:"Header_header__heading__BlGzf",header__lead:"Header_header__lead__1jR8H"}},34:function(e,n,t){e.exports={addFiles:"AddFileCard_addFiles__1Cp53",icon:"AddFileCard_icon__2tDcj"}},38:function(e,n,t){e.exports={backdrop:"Backdrop_backdrop__2USgN",backdrop_active:"Backdrop_backdrop_active__Esi8Q"}},47:function(e,n,t){e.exports={input:"FileInput_input__3v6pL"}},48:function(e,n,t){e.exports={spinner:"Spinner_spinner__3GSHq",rotate:"Spinner_rotate__2wN5u"}},50:function(e,n,t){e.exports={list:"FileList_list__3k0mc"}},54:function(e,n,t){e.exports=t(70)},63:function(e,n,t){},70:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(26),o=t.n(r),c=t(6),s=t(17),l=t(8),u=function(e){return Array.isArray(e)?e.join(" "):Object.keys(e).filter((function(n){return e[n]})).join(" ")},d=function(e){try{return JSON.parse(e)}catch(n){return null}},f=function(e,n){var t={};for(var a in e)t[a]=n(e[a],a,e);return t},m=function(e){return f(e,(function(e){return{name:e.name,size:e.size}}))},p=function(e,n){var t=document.createElement("a");t.href=URL.createObjectURL(e),document.body.appendChild(t),t.download=n,t.click(),window.URL.revokeObjectURL(t.href),t.remove()},h=function(e){return e.filter((function(e){var n=e.size,t=e.name,a=e.type;return 0!==n&&(!t.match(/lnk$/)&&(""!==a||4096!==n))}))},v=function(e){return{type:"SET_CONNECTION_STATUS",payload:{status:e}}},_=function(e){var n={};return e.forEach((function(e){return n[function(e){return"".concat(e.lastModified).concat(e.size).concat(e.name)}(e)]=e})),{type:"HOST_ADD_FILES",payload:n}},g={isHost:!1,status:"new"},E=t(31),b=t(32),F={},w={},O=Object(s.b)({connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_CONNECTION":return e.connection&&e.connection.destroy(),Object(l.a)({},e,{},n.payload,{status:"new"});case"SET_CONNECTION_STATUS":return Object(l.a)({},e,{},n.payload)}return e},hostFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"HOST_ADD_FILES":return Object(l.a)({},e,{},n.payload);case"HOST_REMOVE_FILE":var t=n.payload.id,a=(e[t],Object(E.a)(e,[t].map(b.a)));return a;case"HOST_CLEAR_FILES":return{}}return e},clientFiles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CLIENT_ADD_FILES":return Object(l.a)({},e,{},n.payload);case"CLIENT_REMOVE_FILE":var t=n.payload.id,a=(e[t],Object(E.a)(e,[t].map(b.a)));return a;case"SET_DOWNLOAD_PROGRESS":var i=Object(l.a)({},e);return i[n.payload.id].downloadedSize=n.payload.downloadedSize,i;case"SAVE_FILE_DATA":var r=Object(l.a)({},e);return r[n.payload.id].file=n.payload.file,r}return e}}),S=Object(s.c)(O),C=(t(63),t(15)),y=t(10),N=t(3),j=t.n(N),k=t(12),x=t(30),T=t(18),L=t.n(T),D=t(47),A=t.n(D),z=t(21),I=t(38),H=t.n(I),R=function(e){var n,t=e.children,a=e.active,r=void 0===a||a,o=(n={},Object(z.a)(n,H.a.backdrop,!0),Object(z.a)(n,H.a.backdrop_active,r),n);return i.a.createElement("div",{className:u(o)},t)},M=function(e){var n=e.onFileInput,t=e.noFocus,r=Object(a.useState)(!1),o=Object(x.a)(r,2),c=o[0],s=o[1],l=Object(a.useRef)(null),u=Object(a.useCallback)((function(e){var t=h(e);t.length&&n(t)}),[n]),d=Object(a.useCallback)((function(e){e.preventDefault(),s(!1);var n=e.dataTransfer.files;n&&u(Array.from(n))}),[u]),f=Object(a.useCallback)((function(e){var n=e.target.files;n&&u(Array.from(n))}),[u]);return Object(a.useEffect)((function(){var e=function(){return s(!0)},n=function(e){e.target===l.current&&s(!1)};return window.addEventListener("dragenter",e),window.addEventListener("dragleave",n),function(){window.removeEventListener("dragenter",e),window.removeEventListener("dragleave",n)}}),[]),i.a.createElement(R,{active:c},i.a.createElement("div",{ref:l,className:A.a.input,onDragOver:function(e){return e.preventDefault()},onDrop:d},i.a.createElement("input",{type:"file",name:"files",className:"visually-hidden",multiple:!0,onChange:f,tabIndex:t?-1:0})))},B=t(9),J=t(29),P={iceServers:[{urls:["stun:stun.l.google.com:19302"]},{urls:["stun:stun1.l.google.com:19302"]},{urls:["stun:stun2.l.google.com:19302"]},{urls:["stun:stun3.l.google.com:19302"]},{urls:["stun:stun4.l.google.com:19302"]},{urls:["stun:stun.voipstunt.com"]}]},q=function(){function e(){var n=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;Object(B.a)(this,e),this.connection=void 0,this.messageChannel=void 0,this.onConnection=function(e){},this.onMessage=function(e){},this.destroy=function(){n.connection.ondatachannel=null,n.connection.oniceconnectionstatechange=null},this.handleDataChannel=function(e){var t=e.channel;"message"===t.label&&(n.messageChannel=t)},this.createOffer=function(){var e=n.connection;return new Promise(function(){var t=Object(k.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onicecandidate=function(e){return!e.candidate&&a(n.description)},t.t0=e,t.next=4,e.createOffer();case 4:return t.t1=t.sent,t.next=7,t.t0.setLocalDescription.call(t.t0,t.t1);case 7:setTimeout((function(){"complete"!==e.iceGatheringState&&a(n.description)}),2e3);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},this.connect=function(e){var t=n.connection,a=new RTCSessionDescription(JSON.parse(e));return new Promise(function(){var e=Object(k.a)(j.a.mark((function e(i){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.setRemoteDescription(a);case 2:if("offer"===a.type){e.next=4;break}return e.abrupt("return",i());case 4:return t.onicecandidate=function(e){return!e.candidate&&i(n.description)},e.t0=t,e.next=8,t.createAnswer();case 8:return e.t1=e.sent,e.next=11,e.t0.setLocalDescription.call(e.t0,e.t1);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},this.sendMessage=function(e){var t=n.messageChannel;if("open"===t.readyState)return t.send(e);setTimeout((function(){return n.sendMessage(e)}),50)},this.sendJSON=function(e){n.sendMessage(JSON.stringify(e))};var a=new RTCPeerConnection(t);this.connection=a;var i=a.createDataChannel("message");this.messageChannel=i,i.onmessage=function(e){return n.onMessage(e.data)},a.ondatachannel=function(e){return n.handleDataChannel(e)},a.oniceconnectionstatechange=function(){return n.onConnection(a.iceConnectionState)}}return Object(J.a)(e,[{key:"description",get:function(){return JSON.stringify(this.connection.localDescription)}}]),e}(),Q=t(51),U=t(53),G=t(52),V=function(){function e(n){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16384;Object(B.a)(this,e),this.channel=void 0,this.chunkSize=void 0,this.file=void 0,this.startTime=0,this.onFileReady=function(e,n){},this.onFileProgress=function(e){},this.onMessage=function(e){if("string"!==typeof e)return t.onData(e);var n=JSON.parse(e),a=n.status,i=n.info,r=t.file;"new"===a&&i?t.onNewFile(i):"done"===a&&r&&t.onFileDownloaded(r.data,r.info)},this.onData=function(e){var n=t.file;if(n){n.data.push(e);var a=n.info,i=a.id,r=a.size,o=n.downloaded+=e.byteLength;t.onFileProgress({size:r,id:i,downloaded:o})}},this.onNewFile=function(e){t.startTime=performance.now(),t.file={data:[],downloaded:0,info:e}},this.onFileDownloaded=function(e,n){console.log(t.speedStats(n.size));var a=new Blob(e);t.onFileReady(a,n),t.file=void 0},this.speedStats=function(e){var n=(performance.now()-t.startTime)/1e3,a=e/1024/1024;return{time:"".concat(n.toFixed(2)," \u0441\u0435\u043a."),size:"".concat(a.toFixed(2)," \u043c\u0431"),speed:"".concat((a/n).toFixed(2)," \u043c\u0431/\u0441\u0435\u043a")}},this.sendingQueue=[],this.sendFile=function(e,n){var a=t.sendingQueue;!!a.find((function(e){return e.id===n}))||(a.push({file:e,id:n}),1===a.length&&t._sendFile())},this._sendFile=function(){if(t.sendingQueue.length){var e=t.sendingQueue[0],n=e.file,a=e.id,i=t.readFileChunks(n,{onChunkLoad:function(){return r()}});t.startSendingFile(a,n.name,n.size);var r=t.sendData(i,n.size);t.channel.onbufferedamountlow=r}},this.startSendingFile=function(e,n,a){t.startTime=performance.now();var i={status:"new",info:{id:e,name:n,size:a}};t.channel.send(JSON.stringify(i))},this.doneSendingFile=function(){t.channel.onbufferedamountlow=null,t.channel.send(JSON.stringify({status:"done"}));var e=t.sendingQueue.shift();console.log(t.speedStats((null===e||void 0===e?void 0:e.file.size)||1)),t._sendFile()},this.splitBuffer=function(e,n){for(var t=0,a=[];t<e.byteLength;)a.push(e.slice(t,t+n)),t+=n;return a},this.readFileChunks=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=2097152,i=[],r=0,o=new FileReader,c=n.onChunkLoad,s=void 0===c?function(){}:c,l=n.onLoaded,u=void 0===l?function(){}:l;return o.onload=function(){o.result&&"string"!==typeof o.result&&(i.push.apply(i,Object(G.a)(t.splitBuffer(o.result,t.chunkSize))),r+=a,s(o.result))},o.onloadend=function(){r<e.size?o.readAsArrayBuffer(e.slice(r,r+a)):u(i)},o.readAsArrayBuffer(e.slice(0,a)),i},this.sendData=function(e,n){var a=Math.max(8*t.chunkSize,1048576),i=!1,r=t.sendChunks(e,n);return function n(){if(!i&&e.length){i=!0;var o,c=t.channel.bufferedAmount;do{if(c+=(o=r.next()).value||0,!o.done&&0===o.value)return void(i=!1);if(c>=a)return t.channel.bufferedAmount<t.chunkSize&&setTimeout(n,0),void(i=!1)}while(!o.done);t.doneSendingFile()}}},this.channel=n,this.chunkSize=a}return Object(J.a)(e,[{key:"sendChunks",value:j.a.mark((function e(n,t){var a,i,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,i=0;case 2:if(!(a<t)){e.next=16;break}if(!(r=n[i])){e.next=12;break}return i++,this.channel.send(r),a+=r.byteLength,e.next=10,r.byteLength;case 10:e.next=14;break;case 12:return e.next=14,0;case 14:e.next=2;break;case 16:case"end":return e.stop()}}),e,this)}))}]),e}(),Z=function(e){Object(U.a)(t,e);var n=Object(Q.a)(t);function t(e){var a,i;Object(B.a)(this,t),(i=n.call(this,e)).fileChannel=void 0,i.onFile=function(e,n){},i.onFileProgress=function(e){},i.onRequestFile=function(e){},i.handleDataChannel=function(e){var n=e.channel;"message"===n.label&&(i.messageChannel=n),"file"===n.label&&(i.fileChannel.channel=n)},i._onMessage=function(e){var n=d(e.data);if(n&&"sendFile"===n.action){var t=i.onRequestFile(n.id);t&&i.sendFile(t,n.id)}else i.onMessage(e.data)},i.sendFile=function(e,n){return i.fileChannel.sendFile(e,n)},i.requestFile=function(e){i.sendJSON({action:"sendFile",id:e})};var r=i.connection.createDataChannel("file"),o=new V(r,null===(a=i.connection.sctp)||void 0===a?void 0:a.maxMessageSize);return i.fileChannel=o,o.onFileReady=function(e,n){return i.onFile(e,n)},o.onFileProgress=function(e){return i.onFileProgress(e)},r.onmessage=function(e){var n=e.data;return o.onMessage(n)},i.messageChannel.onmessage=i._onMessage,i}return t}(q),K=t(39);t(65);K.initializeApp({apiKey:"AIzaSyCOmcLQTAhqWDbXZTfhzU0CIOFQj5BjbFE",authDomain:"file-share-6b78c.firebaseapp.com",databaseURL:"https://file-share-6b78c.firebaseio.com",projectId:"file-share-6b78c",storageBucket:"file-share-6b78c.appspot.com",messagingSenderId:"1009616620358"});var W=K,$=function e(){var n=this;Object(B.a)(this,e),this.connections=void 0,this.doc=function(e){return n.connections.doc(e)},this.add=function(e){return n.connections.add(e)},this.getOffer=function(){var e=Object(k.a)(j.a.mark((function e(t){var a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.doc(t).get();case 2:if(a=e.sent,!(i=a.data())){e.next=8;break}if(!i.answer){e.next=7;break}throw new Error("Was already connected");case 7:return e.abrupt("return",i.offer);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),this.sendOffer=function(e){return n.add({offer:e}).then((function(e){return e.id}))},this.getAnswer=function(e){return new Promise((function(t){var a=n.doc(e).onSnapshot((function(e){var n=e.data();n&&n.answer&&(t(n.answer),a())}))}))},this.sendAnswer=function(e,t){return n.doc(e).set({answer:t},{merge:!0})},this.connections=W.firestore().collection("connections")},X=t(48),Y=t.n(X),ee=function(){return i.a.createElement("span",{className:Y.a.spinner})},ne=Object(c.b)(null,{addConnection:function(e){return{type:"SET_CONNECTION",payload:{isHost:!0,connection:e}}},addFiles:_,clearFiles:function(){return{type:"HOST_CLEAR_FILES"}}})((function(e){var n=e.addConnection,t=e.addFiles,r=e.clearFiles,o=Object(y.g)(),c=Object(a.useState)(!1),s=Object(x.a)(c,2),l=s[0],u=s[1],d=function(){var e=Object(k.a)(j.a.mark((function e(a){var i,c,s,l,d;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Z,n(i),r(),t(a),c=new $,u(!0),e.next=8,i.createOffer();case 8:return s=e.sent,e.next=11,c.sendOffer(s);case 11:return l=e.sent,o.push("/".concat(l)),e.next=15,c.getAnswer(l);case 15:d=e.sent,i.connect(d);case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:L.a.container},i.a.createElement("h1",{className:L.a.heading},"Share files easily"),i.a.createElement("p",{className:L.a.lead},"Drop files here or click to select"),i.a.createElement(M,{onFileInput:d})),i.a.createElement(R,{active:l},i.a.createElement("div",{className:L.a.backdrop},i.a.createElement("div",{className:L.a.spinnerContainer},i.a.createElement(ee,null)))))})),te=t(19),ae=t.n(te),ie=t(23),re=t.n(ie),oe=function(e){var n=e.text,t=Object(a.useRef)(null);return i.a.createElement("div",{className:re.a.inputGroup},i.a.createElement("input",{ref:t,className:re.a.input,readOnly:!0,value:n,onFocus:function(e){return e.target.select()},autoFocus:!0}),i.a.createElement("button",{className:re.a.btn,onClick:function(){var e;if(!navigator.clipboard)return null===(e=t.current)||void 0===e?void 0:e.focus();navigator.clipboard.writeText(n)}},i.a.createElement("svg",{className:re.a.icon,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("use",{href:"icons.svg#copy"}))))},ce=t(50),se=t.n(ce),le=t(13),ue=t.n(le),de=function(e){var n=e.name,t=e.id,a=e.onClick,r=e.progress,o=e.iconOnHover,c=n.match(/\.([a-zA-Z0-9])+$/),s=function(e){e=e.toLowerCase();var n={"file-text":["txt","doc","docx","rtf","odt"],"file-image":["psd","tiff","tif","bmp","jpeg","jpg","gif","png","ico","webp","svg","eps","ai","heic","nef","crw","arw"],"file-audio":["ac3","aif","amr","aud","mp3","flac","iff","m4a","m4b","m4p","mid","mpa","ogg","wav","wave"],"file-video":["mp4","avi","mpg","mov","wmv","3gp","flv","m4v","mts","ts","webm"],"file-zip":["zip","rar","7z","jar","gz"]};for(var t in n)if(n[t].includes(e))return t;return"file-empty"}(c?c[1]:"");return i.a.createElement("button",{className:ue.a.card,onClick:function(){return a&&a(t)}},i.a.createElement("div",{className:ue.a.card_iconContainer},i.a.createElement("svg",{className:ue.a.card__icon,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("use",{href:"icons.svg#".concat(s)})),i.a.createElement("svg",{className:ue.a.card__icon_hover,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("use",{href:"icons.svg#".concat(o)}))),i.a.createElement("p",{className:ue.a.card__title,title:n},n),i.a.createElement("progress",{value:null!==r&&void 0!==r?r:0,max:100,className:ue.a.card__progress}))},fe=function(e){var n=e.files,t=e.onFileClick,a=e.appendComponent,r=e.iconOnHover;return i.a.createElement("ul",{className:se.a.list},n.map((function(e){return i.a.createElement("li",{key:e.id},i.a.createElement(de,Object.assign({},e,{onClick:t,iconOnHover:r})))})),a?i.a.createElement("li",null,a):null)},me=t(33),pe=t.n(me),he=function(e){var n=e.main,t=e.lead;return i.a.createElement("header",{className:pe.a.header},i.a.createElement("h2",{className:pe.a.header__heading},n),i.a.createElement("p",{className:pe.a.header__lead},t))},ve=t(34),_e=t.n(ve),ge=function(e){var n=e.onFileInput,t=Object(a.useCallback)((function(e){var t=h(Array.from(e.target.files||[]));t.length&&n(t)}),[n]);return i.a.createElement("label",{className:_e.a.addFiles},i.a.createElement("svg",{className:_e.a.icon,xmlns:"http://www.w3.org/2000/svg"},i.a.createElement("use",{href:"icons.svg#file-add"})),i.a.createElement("span",{className:_e.a.addFiles__caption},"Add Files"),i.a.createElement("input",{type:"file",className:"visually-hidden",multiple:!0,onChange:t}))},Ee=ee,be=i.a.createElement(i.a.Fragment,null,"waiting for connection",i.a.createElement("span",{className:ae.a.spinner},i.a.createElement(Ee,null))),Fe=function(e){var n=e.files,t=e.addFiles,a=e.removeFile,r="connected"===e.connectionStatus,o=r?"Files can be downloaded now":"Share this link",c=r?"don't close the tab until files are downloaded":be;return i.a.createElement(i.a.Fragment,null,i.a.createElement(he,{main:o,lead:c}),i.a.createElement("div",{className:ae.a.connectionBox},r?i.a.createElement("div",{className:ae.a.connectionStatus},"Connected"):i.a.createElement(oe,{text:window.location.href})),i.a.createElement("main",{className:ae.a.container},i.a.createElement("h2",{className:ae.a.heading},"Files"),i.a.createElement(fe,{files:n,appendComponent:i.a.createElement(ge,{onFileInput:t}),onFileClick:a,iconOnHover:"file-delete"})),i.a.createElement(M,{onFileInput:t,noFocus:!0}))},we=Object(c.b)((function(e){return{files:e.hostFiles,connectionStatus:e.connection.status}}),{addFiles:_,removeFile:function(e){return{type:"HOST_REMOVE_FILE",payload:{id:e}}},setConnectionStatus:v})((function(e){var n=e.connection,t=e.files,r=e.addFiles,o=e.removeFile,c=e.connectionStatus,s=e.setConnectionStatus,l=Object(y.g)();Object(a.useEffect)((function(){n.onRequestFile=function(e){return t[e]},n.onConnection=function(e){if(s(e),"disconnected"===e)return l.push("/");"connected"===e&&n.sendJSON({action:"addFiles",files:m(t)})}}),[n,t,s,l]);var u=Object(a.useCallback)((function(e){var t=r(e).payload;n.sendJSON({action:"addFiles",files:m(t)})}),[n,r]),d=Object(a.useCallback)((function(e){o(e),n.sendJSON({action:"removeFile",id:e})}),[n,o]),f=Object.keys(t).map((function(e){return{id:e,name:t[e].name}}));return i.a.createElement(Fe,{addFiles:u,files:f,removeFile:d,connectionStatus:c})})),Oe=t(14),Se=t.n(Oe),Ce=function(e){var n=e.files,t=e.requestFile;return"connected"!==e.connectionStatus?i.a.createElement(i.a.Fragment,null,i.a.createElement(he,{main:"Connecting",lead:""}),i.a.createElement("div",{className:Se.a.spinner},i.a.createElement(Ee,null))):i.a.createElement(i.a.Fragment,null,i.a.createElement(he,{main:"Download files",lead:"click on file to start download"}),i.a.createElement("div",{className:Se.a.connectionBox},i.a.createElement("div",{className:Se.a.connectionStatus},"You are connected")),i.a.createElement("main",{className:Se.a.container},i.a.createElement("h2",{className:Se.a.heading},"Files"),Object.keys(n).length?i.a.createElement(fe,{files:n,onFileClick:t,iconOnHover:"file-download"}):i.a.createElement("h3",{className:Se.a.noFiles},"There's no files yet :(")))},ye=Object(c.b)((function(e){return{files:e.clientFiles,connectionStatus:e.connection.status}}),{addFiles:function(e){return{type:"CLIENT_ADD_FILES",payload:e}},removeFile:function(e){return{type:"CLIENT_REMOVE_FILE",payload:{id:e}}},setDownloadProgress:function(e,n){return{type:"SET_DOWNLOAD_PROGRESS",payload:{id:e,downloadedSize:n}}},saveFileData:function(e,n){return{type:"SAVE_FILE_DATA",payload:{id:e,file:n}}},setConnectionStatus:v})((function(e){var n=e.connection,t=e.connectionStatus,r=e.files,o=e.addFiles,c=e.removeFile,s=e.setDownloadProgress,l=e.saveFileData,u=e.setConnectionStatus,f=Object(y.g)();Object(a.useEffect)((function(){n.onMessage=function(e){var n=d(e);if(n)switch(n.action){case"addFiles":return o(n.files);case"removeFile":return c(n.id)}}}),[n,o,c]),Object(a.useEffect)((function(){n.onFileProgress=function(e){var n=e.downloaded,t=e.id;return s(t,n)},n.onConnection=function(e){u(e),"disconnected"===e&&f.push("/")}}),[n,s,u,f]),Object(a.useEffect)((function(){n.onFile=function(e,n){l(n.id,e),p(e,n.name)}}),[n,l]),Object(a.useEffect)((function(){var e=function(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none")},n=function(e){return e.preventDefault()};return window.addEventListener("dragover",e),window.addEventListener("drop",n),function(){window.removeEventListener("dragover",e),window.removeEventListener("drop",n)}}),[]);var m=Object(a.useCallback)((function(e){var t=r[e];if(t.file)return p(t.file,t.name);t.downloadedSize||(s(e,1),n.requestFile(e))}),[n,r,s]),h=Object.keys(r).map((function(e){var n=r[e],t={id:e,name:n.name};return n.downloadedSize&&(t.progress=n.downloadedSize/n.size*100),t}));return i.a.createElement(Ce,{files:h,requestFile:m,connectionStatus:t})})),Ne=Object(c.b)((function(e){return{isHost:e.connection.isHost,connection:e.connection.connection}}),{clientSetConnection:function(e){return{type:"SET_CONNECTION",payload:{isHost:!1,connection:e}}}})((function(e){var n=e.isHost,t=e.connection,a=e.clientSetConnection,r=Object(y.g)(),o=Object(y.h)().id;if(t)return n?i.a.createElement(we,{connection:t}):i.a.createElement(ye,{connection:t});if(n||!o)return i.a.createElement(y.a,{to:"/"});var c=new Z,s=new $;return a(c),s.getOffer(o).then((function(e){if(!e)throw new Error("Can't get offer");return c.connect(e)})).then((function(e){return s.sendAnswer(o,e)})).catch((function(){return r.replace("/")})),i.a.createElement("div",null,"Loading...")}));var je=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(C.a,{hashType:"noslash"},i.a.createElement(y.d,null,i.a.createElement(y.b,{path:"/:id"},i.a.createElement(Ne,null)),i.a.createElement(y.b,{path:"/"},i.a.createElement(ne,null)))))};o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(c.a,{store:S},i.a.createElement(je,null))),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.3d72b3d0.chunk.js.map